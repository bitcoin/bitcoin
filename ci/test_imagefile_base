# Copyright (c) The Bitcoin Core developers
# Distributed under the MIT software license, see the accompanying
# file COPYING or https://opensource.org/license/mit/.

# See ci/README.md for usage.

# This offers a CI base image, which can be used as a shared base layer for
# individual CI images.

FROM mirror.gcr.io/ubuntu:24.04

COPY ./ci/retry/retry /usr/bin/retry
COPY ./ci/test/00_setup_env.sh /ci_container_base/ci/test/

RUN ["bash", "-c", "cd /ci_container_base/ && set -o errexit && source ./ci/test/00_setup_env.sh && apt-get update && apt-get install --no-install-recommends --no-upgrade -y $CI_BASE_PACKAGES"]
